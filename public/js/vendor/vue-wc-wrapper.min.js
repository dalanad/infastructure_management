
const camelizeRE=/-(\w)/g,camelize=t=>t.replace(camelizeRE,((t,e)=>e?e.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=t=>t.replace(hyphenateRE,"-$1").toLowerCase();function getInitialProps(t){const e={};return t.forEach((t=>{e[t]=void 0})),e}function injectHook(t,e,o){t[e]=[].concat(t[e]||[]),t[e].unshift(o)}function callHooks(t,e){if(t){(t.$options[e]||[]).forEach((e=>{e.call(t)}))}}function createCustomEvent(t,e){return new CustomEvent(t,{bubbles:!1,cancelable:!1,detail:e})}const isBoolean=t=>/function Boolean/.test(String(t)),isNumber=t=>/function Number/.test(String(t));function convertAttributeValue(t,e,{type:o}={}){if(/function Boolean/.test(String(o)))return"true"===t||"false"===t?"true"===t:""===t||t===e||null!=t||t;if(isNumber(o)){const e=parseFloat(t,10);return isNaN(e)?t:e}return t}function toVNodes(t,e){const o=[];for(let n=0,r=e.length;n<r;n++)o.push(toVNode(t,e[n]));return o}function toVNode(t,e){if(3===e.nodeType)return e.data.trim()?e.data:null;if(1===e.nodeType){const o={attrs:getAttributes(e),domProps:{innerHTML:e.innerHTML}};return o.attrs.slot&&(o.slot=o.attrs.slot,delete o.attrs.slot),t(e.tagName,o)}return null}function getAttributes(t){const e={};for(let o=0,n=t.attributes.length;o<n;o++){const n=t.attributes[o];e[n.nodeName]=n.nodeValue}return e}function wrap(t,e){const o="function"==typeof e&&!e.cid;let n,r,s,a=!1;function i(t){if(a)return;const e="function"==typeof t?t.options:t,o=Array.isArray(e.props)?e.props:Object.keys(e.props||{});n=o.map(hyphenate),r=o.map(camelize);const i=Array.isArray(e.props)?{}:e.props||{};s=r.reduce(((t,e,n)=>(t[e]=i[o[n]],t)),{}),injectHook(e,"beforeCreate",(function(){const t=this.$emit;this.$emit=(e,...o)=>(this.$root.$options.customElement.dispatchEvent(createCustomEvent(e,o)),t.call(this,e,...o))})),injectHook(e,"created",(function(){r.forEach((t=>{this.$root.props[t]=this[t]}))})),r.forEach((t=>{Object.defineProperty(l.prototype,t,{get(){return this._wrapper.props[t]},set(e){this._wrapper.props[t]=e},enumerable:!1,configurable:!0})})),a=!0}function c(t,e){const o=camelize(e),n=t.hasAttribute(e)?t.getAttribute(e):void 0;t._wrapper.props[o]=convertAttributeValue(n,e,s[o])}class l extends HTMLElement{constructor(){const o=super();o.attachShadow({mode:"open"});const n=o._wrapper=new t({name:"shadow-root",customElement:o,shadowRoot:o.shadowRoot,data:()=>({props:{},slotChildren:[]}),render(t){return t(e,{ref:"inner",props:this.props},this.slotChildren)}});new MutationObserver((t=>{let e=!1;for(let n=0;n<t.length;n++){const r=t[n];a&&"attributes"===r.type&&r.target===o?c(o,r.attributeName):e=!0}e&&(n.slotChildren=Object.freeze(toVNodes(n.$createElement,o.childNodes)))})).observe(o,{childList:!0,subtree:!0,characterData:!0,attributes:!0})}get vueComponent(){return this._wrapper.$refs.inner}connectedCallback(){const t=this._wrapper;if(t._isMounted)callHooks(this.vueComponent,"activated");else{const o=()=>{t.props=getInitialProps(r),n.forEach((t=>{c(this,t)}))};a?o():e().then((t=>{(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),i(t),o()})),t.slotChildren=Object.freeze(toVNodes(t.$createElement,this.childNodes)),t.$mount(),this.shadowRoot.appendChild(t.$el)}}disconnectedCallback(){callHooks(this.vueComponent,"deactivated")}}return o||i(e),l}export default wrap;
